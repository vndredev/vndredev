---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Section from '@/components/astro/Section.astro';
import Footer from '@/components/astro/Footer.astro';
import AnimatedHero from '@/components/react/AnimatedHero';
import AnimatedSection from '@/components/react/AnimatedSection';
import ContactForm from '@/components/react/ContactForm';
import ProjectsSection from '@/components/react/ProjectsSection';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const techStack = [
  { category: t('tech.frontend'), items: ['TypeScript', 'React', 'Next.js', 'Tailwind CSS'] },
  { category: t('tech.mobile'), items: ['Swift', 'Kotlin', 'React Native', 'Expo'] },
  { category: t('tech.backend'), items: ['Node.js', 'Python', 'PostgreSQL', 'Docker'] },
  { category: t('tech.ai'), items: ['Claude Code', 'OpenAI', 'LangChain'] },
];

const socialLinks = [
  { name: 'Threads', url: 'https://threads.net/@vndredev', icon: 'threads' },
  { name: 'Instagram', url: 'https://instagram.com/vndredev', icon: 'instagram' },
  { name: 'GitHub', url: 'https://github.com/vndredev', icon: 'github' },
  { name: 'Email', url: 'mailto:hello@vndre.dev', icon: 'email' },
];

const contactTranslations = {
  name: t('contact.name'),
  email: t('contact.email'),
  message: t('contact.message'),
  send: t('contact.send'),
  sending: t('contact.sending'),
  success: t('contact.success'),
  successText: t('contact.success.text'),
  another: t('contact.another'),
  error: t('contact.error'),
  placeholderName: t('contact.placeholder.name'),
  placeholderEmail: t('contact.placeholder.email'),
  placeholderMessage: t('contact.placeholder.message'),
};

const projectsTranslations = {
  error: t('projects.error'),
  empty: t('projects.empty'),
};
---

<BaseLayout
  title="Andre Schmidt | Fullstack Developer"
  description="Fullstack Developer specializing in TypeScript, React, and AI-powered solutions. Building modern web applications with a focus on performance and user experience."
  lang={lang}
>
  <!-- Hero Section -->
  <Section class="min-h-[80vh] flex items-center justify-center">
    <AnimatedHero
      client:load
      logoSrc="/logo.png"
      name="Andre Schmidt"
      title={t('hero.title')}
      description={t('hero.description')}
    />
  </Section>

  <!-- About Section -->
  <Section id="about">
    <AnimatedSection client:visible>
      <h2 class="text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight text-center mb-16" style="letter-spacing: -0.02em;">
        {t('about.title')}
      </h2>
    </AnimatedSection>

    <AnimatedSection client:visible delay={0.1}>
      <div class="max-w-4xl mx-auto text-center">
        <div class="mb-8 flex justify-center">
          <div class="w-32 h-32 sm:w-40 sm:h-40 rounded-full glass-logo-inline overflow-hidden">
            <img
              src="/me.jpeg"
              alt="Andre Schmidt"
              class="w-full h-full object-cover"
            />
          </div>
        </div>
        <p class="text-xl sm:text-2xl text-[var(--text-secondary)] leading-relaxed mb-8">
          {t('about.p1')}
        </p>
        <p class="text-xl sm:text-2xl text-[var(--text-secondary)] leading-relaxed">
          {t('about.p2')}
        </p>
      </div>
    </AnimatedSection>

    <!-- Tech Stack -->
    <AnimatedSection client:visible delay={0.2}>
      <div class="mt-20 grid gap-12 sm:grid-cols-2 lg:grid-cols-4">
        {techStack.map((stack) => (
          <div class="text-center">
            <h3 class="text-base font-semibold uppercase tracking-widest text-[var(--color-accent)] mb-6">
              {stack.category}
            </h3>
            <div class="flex flex-wrap justify-center gap-3">
              {stack.items.map((item) => (
                <span class="px-4 py-2 text-base rounded-full glass-button text-[var(--text-secondary)]">
                  {item}
                </span>
              ))}
            </div>
          </div>
        ))}
      </div>
    </AnimatedSection>
  </Section>

  <!-- Projects Section -->
  <Section id="projects" class="relative glass-section">
    <AnimatedSection client:visible>
      <h2 class="text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight text-center mb-16" style="letter-spacing: -0.02em;">
        {t('projects.title')}
      </h2>
    </AnimatedSection>

    <ProjectsSection client:load translations={projectsTranslations} />
  </Section>

  <!-- Contact Section -->
  <Section id="contact">
    <AnimatedSection client:visible>
      <h2 class="text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight text-center mb-8" style="letter-spacing: -0.02em;">
        {t('contact.title')}
      </h2>
      <p class="text-xl sm:text-2xl text-[var(--text-secondary)] text-center max-w-3xl mx-auto mb-16">
        {t('contact.subtitle')}
      </p>
    </AnimatedSection>

    <AnimatedSection client:visible delay={0.1}>
      <div class="flex justify-center gap-8">
        {socialLinks.map((link) => (
          <a
            href={link.url}
            target={link.url.startsWith('mailto:') ? undefined : '_blank'}
            rel={link.url.startsWith('mailto:') ? undefined : 'noopener noreferrer'}
            class="group flex items-center justify-center w-16 h-16 sm:w-18 sm:h-18 rounded-full glass-button transition-all duration-300 hover:bg-[var(--color-accent)] hover:scale-110"
            aria-label={link.name}
          >
            {link.icon === 'threads' && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 448 512"
                fill="currentColor"
                class="text-neutral-700 dark:text-neutral-300 group-hover:text-neutral-900 dark:group-hover:text-white transition-colors"
              >
                <path d="M331.5 235.7c2.2 .9 4.2 1.9 6.3 2.8c29.2 14.1 50.6 35.2 61.8 61.4c15.7 36.5 17.2 95.8-30.3 143.2c-36.2 36.2-80.3 52.5-142.6 53h-.3c-70.2-.5-124.1-24.1-160.4-70.2c-32.3-41-48.9-98.1-49.5-169.6V256v-.2c.5-71.5 17.1-128.5 49.4-169.6C101.8 40.5 155.6 16.9 225.8 16.4h.3c70.3 .5 124.9 24 162.3 69.9c18.4 22.7 32 50 40.6 81.7l-40.4 10.8c-7.1-25.8-17.8-47.8-32.2-65.4c-29.2-35.8-73-54.2-130.5-54.6c-57 .5-100.1 18.8-128.2 54.4C72.1 146.1 58.5 194.3 58 256c.5 61.7 14.1 109.9 40.3 143.3c28 35.6 71.2 53.9 128.2 54.4c51.4-.4 85.4-12.6 113.7-40.9c32.3-32.2 31.7-71.8 21.4-95.9c-6.1-14.2-17.1-26-31.9-34.9c-3.7 26.9-11.8 48.3-24.7 64.8c-17.1 21.8-41.4 33.6-72.7 35.3c-23.6 1.3-46.3-4.4-63.9-16c-20.8-13.8-33-34.8-34.3-59.3c-2.5-48.3 35.7-83 95.2-86.4c21.1-1.2 40.9-.3 59.2 2.8c-2.4-14.8-7.3-26.6-14.6-35.2c-10-11.7-25.6-17.7-46.2-17.8H227c-16.6 0-39 4.6-53.3 26.3l-34.4-23.6c19.2-29.1 50.3-45.1 87.8-45.1h.8c62.6 .4 99.9 39.5 103.7 107.7l-.2 .2zm-156 68.8c1.3 25.1 28.4 36.8 54.6 35.3c25.6-1.4 54.6-11.4 59.5-73.2c-13.2-2.9-27.8-4.4-43.4-4.4c-4.8 0-9.6 .1-14.4 .4c-42.9 2.4-57.2 23.2-56.2 41.8l-.1 .1z"/>
              </svg>
            )}
            {link.icon === 'instagram' && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-neutral-700 dark:text-neutral-300 group-hover:text-neutral-900 dark:group-hover:text-white transition-colors"
              >
                <rect width="20" height="20" x="2" y="2" rx="5" ry="5" />
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" />
                <line x1="17.5" x2="17.51" y1="6.5" y2="6.5" />
              </svg>
            )}
            {link.icon === 'github' && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-neutral-700 dark:text-neutral-300 group-hover:text-neutral-900 dark:group-hover:text-white transition-colors"
              >
                <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4" />
                <path d="M9 18c-4.51 2-5-2-7-2" />
              </svg>
            )}
            {link.icon === 'email' && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-neutral-700 dark:text-neutral-300 group-hover:text-neutral-900 dark:group-hover:text-white transition-colors"
              >
                <rect width="20" height="16" x="2" y="4" rx="2" />
                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" />
              </svg>
            )}
          </a>
        ))}
      </div>
    </AnimatedSection>

    <!-- Contact Form -->
    <AnimatedSection client:visible delay={0.2}>
      <ContactForm client:visible translations={contactTranslations} />
    </AnimatedSection>
  </Section>

  <Footer lang={lang} />
</BaseLayout>
